<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STEM GYM created by MIKS</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
<style>
* {
    margin: 0;
    padding: 0;
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 1.5rem;
    background: transparent;
}

:root {
    font-size: 16px;
}

body {
    padding: 1rem;
    min-height: calc(100vh - 8rem);
    display: grid;
    place-items: center;
    .home {
        /* display: none; */
        display: grid;
        align-content: center;
        justify-items: center;
        div {
            margin: .75rem;
            padding-inline: 2rem;
            padding-bottom: .2rem;
            border: solid 2px black;
            width: min(calc(100vw - 1rem), 200px);
            text-align: center;
            border-radius: 5px;
        }
    }
    .simulator {
        text-align: center;
        /* display: grid; */
        display: none;
        justify-items: center;
        gap: 1rem;
        .append {
            padding-inline: 3rem;
            padding-bottom: 4px;
            border: solid 2px black;
            border-radius: 10rem;
        }
        .input {
            display: grid;
            row-gap: .5rem;
            select.reactant {
                text-align: center;
                border: solid 2px black;
            }
            input[type="number"] {
                width: 100px;
                text-align: right;
                border: solid 2px black;
            }
            select.unit {
                border: solid 2px black;
                option {
                    text-align: center;
                }
            }
        }
        .reaction_type_container {
            .reaction_type {
                border: solid 2px black;
            }
        }
        .button {
            padding-inline: 3rem;
            border: solid 2px black;
            border-radius: 100vh;
            padding-bottom: 4px;
        }
        .quit {
            position: absolute;
            top: .2rem;
            left: 1rem;
        }
    }
    .questions {
        display: none;
        justify-items: center;
        .quit {
            position: absolute;
            top: .2rem;
            left: 1rem;
        }
        .hint {
            margin-bottom: .5rem;
            .hint_label {
                text-align: center;
                padding-inline: 1rem;
                border: solid 2px black;
                border-radius: 5px;
                padding-bottom: 4px;
            }
            .hint_text {
                display: none;
            }
            .hint_text.visible {
                display: block;
            }
        }
        .question {
            line-height: 1.7;
            input[type=text] {
                border: solid 2px black;
                width: 5rem;
                text-align: center;
                border-radius: 5px;
            }
            input:focus {
                outline-color: red;
            }
            input.correct {
                color: #0f0;
            }
            input.wrong {
                color: red;
            }
        }
        .check_next {
            margin-top: .5rem;
            display: grid;
            grid-template-rows: auto auto auto;
            justify-items: center  ;
            gap: .5rem;
            .button {
                text-align: center;
                padding-inline: 1rem;
                border: solid 2px black;
                border-radius: 5px;
                padding-bottom: 4px;
                width: fit-content;
            }
            .key {
                display: none;
                justify-items: center;
                .key_content {
                    display: none;
                    justify-items: center;
                    word-break: keep-all;
                    font-size: 1rem;
                    * {
                        text-align: center;
                        font-size: 1rem;
                    }
                    table {
                        margin: .5rem;
                        tbody {
                            tr {
                                td {
                                    padding-inline: .5rem;
                                }
                                td.include_arrow {
                                    position: relative;
                                    height: 50px;
                                    .arrow_container {
                                        position: absolute;
                                        top: 0;
                                        left: 50%;
                                        translate: -50% 0;
                                        .arrowDown {
                                            width: 2px;
                                            height: 50px;
                                            background-color: black;
                                            position: relative;
                                            border-radius: 1px;
                                        }
                                        .arrowDown::before {
                                            content: '';
                                            width: 10px;
                                            height: 2px;
                                            background-color: black;
                                            position: absolute;
                                            bottom: 3px;
                                            right: -1px;
                                            rotate: 45deg;
                                            border-radius: 1px;
                                        }
                                        .arrowDown::after {
                                            content: '';
                                            width: 10px;
                                            height: 2px;
                                            background-color: black;
                                            position: absolute;
                                            bottom: 3px;
                                            left: -1px;
                                            rotate: 135deg;
                                            border-radius: 1px;
                                        }
                                    }
                                    .molecule_value {
                                        position: absolute;
                                        top: 50%;
                                        left: calc(50% + 3px);
                                        translate: 0 -50%;
                                    }
                                }
                            }
                        }
                    }
                }
                .key_content.visible {
                    display: grid;
                }
            }
            .next {
                display: none;
            }
        }
    }
}

/* body .questions .check_next .key .key_content table tbody tr td {
    margin-inline: .5rem;
} */
</style>
</head>
<body>
    <div class="container home">
        <div class="to_simulator" onclick="change(0, 1)">シミュレーション</div>
        <div class="to_questions" onclick="change(0, 2); ask()">問題を解く</div>
    </div>
    <div class="container simulator">
        <div class="quit" id="quit1" onclick="change(1, 0)">✕</div>
        <div class="append">欄を追加</div>
        <div class="input">
        </div>
        <div class="reaction_type_container">
            <span>反応の種類：</span>
            <select name="reaction_type" id="reaction_type" class="reaction_type"></select>
        </div>
        <div class="button">反応させる</div>
        <div class="output">
            <div class="label_result">〈結果〉</div>
        </div>
    </div>
    <div class="container questions">
        <div class="quit" id="quit2" onclick="change(2, 0)">✕</div>
        <div class="hint">
            <div
                class="hint_label"
                onclick="document.querySelector('.hint_text').classList.toggle('visible');"
            >ヒント</div>
            <div class="hint_text"></div>
        </div>
        <div class="question"></div>
        <div class="check_next">
            <div class="button check" onclick="check()">決定</div>
            <div class="key">
                <div class="button key_label" onclick="document.querySelector('.key_content').classList.toggle('visible');">解答</div>
                <div class="key_content">
                    <div>2Al + 3H2SO4 <wbr>→ Al2(SO4)3 + 3H2</div>
                    <div>Alについて、<wbr>1.5 ÷ 2 = 0.75</div>
                    <div>H2SO4について、<wbr>1.5 ÷ 3 = 0.50</div>
                    <div>0.75 > 0.50 <wbr>だから、<wbr>H2SO4を<wbr>基準とする。</div>
                    <table>
                        <tr>
                            <td>2Al</td>
                            <td>3H2SO4</td>
                            <td>→</td>
                            <td>Al2(SO4)3</td>
                            <td>3H2</td>
                        </tr>
                        <tr>
                            <td>1.5mol</td>
                            <td>1.5mol</td>
                            <td></td>
                            <td>0mol</td>
                            <td>0mol</td>
                        </tr>
                        <tr>
                            <td class="include_arrow"><div class="arrow_container"><div class="arrowDown"></div></div><div class="molecule_value">-1.0</div></td>
                            <td class="include_arrow"><div class="arrow_container"><div class="arrowDown"></div></div><div class="molecule_value">-1.5</div></td>
                            <td class="include_arrow"></td>
                            <td class="include_arrow"><div class="arrow_container"><div class="arrowDown"></div></div><div class="molecule_value">+0.50</div></td>
                            <td class="include_arrow"><div class="arrow_container"><div class="arrowDown"></div></div><div class="molecule_value">+1.5</div></td>
                        </tr>
                        <tr>
                            <td>0.50mol</td>
                            <td>0mol</td>
                            <td></td>
                            <td>0.50mol</td>
                            <td>1.5mol</td>
                        </tr>
                    </table>
                    <div>よって <wbr>Al2(SO4)3 が <wbr>0.50mol 、 <wbr>H2 が <wbr>1.5mol <wbr>生成され、 <wbr>Al が <wbr>0.50mol <wbr>余る。</div>
                </div>
            </div>
            <div class="button next">次の問題</div>
        </div>
    </div>
<script>
const container_html = document.querySelectorAll('.container');
const append_html = document.querySelector('.append');
const input_html = document.querySelector('.input');
let reactant_html = document.querySelectorAll('.reactant');
let amount_html = document.querySelectorAll('.amount');
let unit_html = document.querySelectorAll('.unit');
const reaction_type_html = document.getElementById('reaction_type');
const button_html = document.querySelector('.button');
const output_html = document.querySelector('.output');
const question_html = document.querySelector('.question');
    const hint_html = document.querySelector('.hint');
        const hint_text_html = document.querySelector('.hint_text');
    const check_html = document.querySelector('.check');
    const key_html = document.querySelector('.key');
        const key_content_html = document.querySelector('.key_content');
    const next_html = document.querySelector('.next');

function define() {
    reactant_html = document.querySelectorAll('.reactant');
    amount_html = document.querySelectorAll('.amount');
    unit_html = document.querySelectorAll('.unit');
}
const form_number = 2;

function change(num1, num2) {
    container_html[num1].style.display = 'none';
    container_html[num2].style.display = 'grid';
}
change(1, 0);
change(2, 0);

function randInt(num1, num2) {
    let alt = Math.abs(num1 - num2) + 1;
    let r = Math.floor(Math.random() * alt);
    return r + Math.min(num1, num2);
}

function randomChoice(array) {
    let r = Math.floor(Math.random() * array.length);
    return array[r];
}

function min(arr) {
    if (arr.length == 0) return 0;
    let minimum = arr[0];
    arr.forEach(e => {if (e <  minimum) minimum = e});
    return minimum;
}

function max(arr) {
    if (arr.length == 0) return 0;
    let maximum = arr[0];
    arr.forEach(e => {if (e >  maximum) maximum = e});
    return maximum;
}
</script>
    <script src="data_molecule.js"></script>
    <script src="data_reaction.js"></script>
    <script src="process_data.js"></script>
    <script src="simulate.js"></script>
    <script src="ask.js"></script>
</body>
</html>